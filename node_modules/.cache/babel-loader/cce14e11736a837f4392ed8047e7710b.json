{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n/**\n * Copyright IBM Corp. 2016, 2022\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport classNames from 'classnames';\nimport ddsSettings from '../../internal/vendor/@carbon/ibmdotcom-utilities/utilities/settings/settings';\nimport { HorizontalRule } from '../HorizontalRule';\nimport PropTypes from 'prop-types';\nimport settings from 'carbon-components/es/globals/js/settings';\nimport TOCDesktop from './TOCDesktop';\nimport TOCMobile from './TOCMobile';\nvar stablePrefix = ddsSettings.stablePrefix;\nvar prefix = settings.prefix;\n/**\n * loops into the array of elements and returns the values\n *\n * @private\n * @returns {Array} returns element name and data title\n */\n\nvar _findMenuItems = function _findMenuItems() {\n  var eles = document.querySelectorAll('a[name]');\n  var menuItems = [];\n  eles.forEach(function (element) {\n    if (element.getAttribute('name') !== 'menuLabel') {\n      menuItems.push({\n        id: element.getAttribute('name'),\n        title: element.getAttribute('data-title') || ''\n      });\n    }\n  });\n  return menuItems;\n};\n/**\n * Table of Contents pattern.\n */\n\n\nvar TableOfContents = function TableOfContents(_ref) {\n  var menuItems = _ref.menuItems,\n      children = _ref.children,\n      menuLabel = _ref.menuLabel,\n      theme = _ref.theme,\n      stickyOffset = _ref.stickyOffset,\n      menuRule = _ref.menuRule,\n      headingContent = _ref.headingContent;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      useMenuItems = _useState2[0],\n      setUseMenuItems = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedId = _useState4[0],\n      setSelectedId = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selectedTitle = _useState6[0],\n      setSelectedTitle = _useState6[1];\n\n  useEffect(function () {\n    setUseMenuItems((menuItems === null || menuItems === void 0 ? void 0 : menuItems.length) ? _toConsumableArray(menuItems) : _findMenuItems());\n  }, [children, menuItems]);\n  useEffect(function () {\n    var id = useMenuItems[0] ? useMenuItems[0].id : '';\n    var title = useMenuItems[0] ? useMenuItems[0].title : '';\n\n    if (id === 'menuLabel' && useMenuItems[1]) {\n      id = useMenuItems[1].id;\n      title = useMenuItems[1].title;\n    }\n\n    setSelectedId(id);\n    setSelectedTitle(title);\n  }, [useMenuItems]);\n  useEffect(function () {\n    /**\n     * Function to be added to eventListener and cleaned later on\n     */\n    var handleRAF = function handleRAF() {\n      window.requestAnimationFrame(setSelectedItem);\n    };\n\n    window.addEventListener('scroll', handleRAF);\n    return function () {\n      return window.removeEventListener('scroll', handleRAF);\n    };\n  });\n  /**\n   * Set selected id & title\n   *\n   */\n\n  var setSelectedItem = function setSelectedItem() {\n    var elems = getElemsInView();\n\n    if (elems) {\n      var _filteredItems$;\n\n      var id = elems || useMenuItems[0].id;\n      var filteredItems = useMenuItems.filter(function (menu) {\n        if (id !== 'undefined') {\n          return menu.id === id;\n        }\n      });\n      var title = (_filteredItems$ = filteredItems[0]) === null || _filteredItems$ === void 0 ? void 0 : _filteredItems$.title;\n\n      if (title !== undefined) {\n        setSelectedId(id);\n        setSelectedTitle(title);\n      }\n    }\n  };\n  /**\n   * Check whether provided anchor tags are in visible viewport\n   *\n   * @returns {string} name attribute\n   */\n\n\n  var getElemsInView = function getElemsInView() {\n    var items = _toConsumableArray(document.querySelectorAll('a[name]')).map(function (elem, index, arr) {\n      return {\n        elem: elem,\n        height: arr[index + 1] ? arr[index + 1].getBoundingClientRect().y - elem.getBoundingClientRect().y : null,\n        position: elem.getBoundingClientRect().y\n      };\n    }).filter(function (elem, index, arr) {\n      return elem.height === null ? arr[index - 1].position < arr[index - 1].height : elem.position - 50 - stickyOffset > -elem.height;\n    }); // Sets last section as active at the end of page in case there is not enough height for it to dynamically activate\n\n\n    var bottomReached = document.documentElement.scrollTop + document.documentElement.clientHeight === document.documentElement.scrollHeight;\n    return !bottomReached ? items[0].elem.getAttribute('name') : items[items.length - 1].elem.getAttribute('name');\n  };\n  /**\n   * Sets the selected menu item\n   *\n   * @param {*} id selected id of menu item\n   * @param {*} title selected title of menu item\n   */\n\n\n  var updateState = function updateState(id, title) {\n    setSelectedId(id);\n    setSelectedTitle(title);\n  };\n  /**\n   * Validate if the Menu Items has Id and Title filled\n   *\n   * @param {Array} menuItems array of Items\n   * @returns {Array} filtered array of items\n   */\n\n\n  var validateMenuItems = function validateMenuItems(menuItems) {\n    return menuItems.filter(function (item) {\n      var _item$title, _item$id;\n\n      return (item === null || item === void 0 ? void 0 : (_item$title = item.title) === null || _item$title === void 0 ? void 0 : _item$title.trim().length) && (item === null || item === void 0 ? void 0 : (_item$id = item.id) === null || _item$id === void 0 ? void 0 : _item$id.trim().length);\n    });\n  };\n  /**\n   * Props for TOCDesktop and TOCMobile\n   *\n   * @type {{\n   * updateState: Function,\n   * selectedId: string,\n   * menuItems: Array,\n   * selectedTitle: string,\n   * menuLabel: string\n   * children: object\n   * }}\n   */\n\n\n  var props = {\n    menuItems: validateMenuItems(useMenuItems),\n    selectedId: selectedId,\n    selectedTitle: selectedTitle,\n    menuLabel: menuLabel,\n    updateState: updateState,\n    children: children.length > 1 ? children[0] : null\n  };\n  /**\n   * Render TableOfContents pattern\n   *\n   * @returns {*} JSX Object\n   */\n\n  return /*#__PURE__*/React.createElement(\"section\", {\n    \"data-autoid\": \"\".concat(stablePrefix, \"--tableofcontents\"),\n    className: classNames(\"\".concat(prefix, \"--tableofcontents\"), _defineProperty({}, \"\".concat(prefix, \"--tableofcontents--\").concat(theme), theme))\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(stablePrefix, \"-ce--table-of-contents__container\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--tableofcontents__sidebar\")\n  }, headingContent && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--tableofcontents__desktop__children\")\n  }, headingContent, menuRule && /*#__PURE__*/React.createElement(HorizontalRule, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--tableofcontents__mobile-top\")\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'sticky',\n      top: stickyOffset ? \"\".concat(stickyOffset, \"px\") : 0\n    }\n  }, /*#__PURE__*/React.createElement(TOCDesktop, _extends({\n    menuRule: menuRule,\n    headingContent: headingContent\n  }, props)), /*#__PURE__*/React.createElement(TOCMobile, props))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--tableofcontents__content\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--tableofcontents__content-wrapper\")\n  }, headingContent !== undefined ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--tableofcontents__children__mobile\")\n  }, headingContent), children) : children))));\n};\n\nTableOfContents.propTypes = {\n  /**\n   * Array of menu item objects to render within the side nav.\n   * Each items has the following structure:\n   *\n   * | Properties Name | Data Type | Description     |\n   * | --------------- | --------- | --------------- |\n   * | title           | String    | Menu title text |\n   * | id              | String    | Menu id         |\n   *\n   * If `menuItems` is not passed in as a prop, the menu items are dynamically\n   * generated based on anchor links that exist on the page. The anchor links should\n   * follow the following format:\n   *\n   * ```html\n   * <a name=\"name-of-section\" data-title=\"Lorem Ipsum\"></a>\n   * ```\n   */\n  menuItems: PropTypes.arrayOf(PropTypes.shape({\n    title: PropTypes.string.isRequired,\n    id: PropTypes.string.isRequired\n  })),\n\n  /**\n   * Content to display next to the side nav.\n   */\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n\n  /**\n   * Placeholder value for menu label.\n   */\n  menuLabel: PropTypes.string,\n\n  /**\n   * Defines the color theme for the pattern. Choose from:\n   *\n   * | Name            | Description                              |\n   * | --------------- | ---------------------------------------- |\n   * | white / default | White theme applied to pattern           |\n   * | g10             | Gray 10 (g10) theme applied to pattern   |\n   * | g100            | Gray 100 (g100) theme applied to pattern |\n   */\n  theme: PropTypes.oneOf(['white', 'g10', 'g100']),\n\n  /**\n   * Defines the offset for the sticky column.\n   */\n  stickyOffset: PropTypes.number,\n\n  /**\n   * Defines if the menu ruler will be rendered.\n   */\n  menuRule: PropTypes.bool,\n\n  /**\n   * Content to be displayed above the navigation menu.\n   */\n  headingContent: PropTypes.node\n};\nTableOfContents.defaultProps = {\n  menuItems: null,\n  menuLabel: 'Jump to',\n  theme: 'white',\n  stickyOffset: null\n};\nexport default TableOfContents;","map":{"version":3,"sources":["/Users/henriquefelixcastro/Downloads/Educathon 2022/educathon-2022-website/node_modules/@carbon/ibmdotcom-react/es/components/TableOfContents/TableOfContents.js"],"names":["_extends","_defineProperty","_toConsumableArray","_slicedToArray","React","useEffect","useState","classNames","ddsSettings","HorizontalRule","PropTypes","settings","TOCDesktop","TOCMobile","stablePrefix","prefix","_findMenuItems","eles","document","querySelectorAll","menuItems","forEach","element","getAttribute","push","id","title","TableOfContents","_ref","children","menuLabel","theme","stickyOffset","menuRule","headingContent","_useState","_useState2","useMenuItems","setUseMenuItems","_useState3","_useState4","selectedId","setSelectedId","_useState5","_useState6","selectedTitle","setSelectedTitle","length","handleRAF","window","requestAnimationFrame","setSelectedItem","addEventListener","removeEventListener","elems","getElemsInView","_filteredItems$","filteredItems","filter","menu","undefined","items","map","elem","index","arr","height","getBoundingClientRect","y","position","bottomReached","documentElement","scrollTop","clientHeight","scrollHeight","updateState","validateMenuItems","item","_item$title","_item$id","trim","props","createElement","concat","className","style","top","Fragment","propTypes","arrayOf","shape","string","isRequired","oneOfType","node","oneOf","number","bool","defaultProps"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\n/**\n * Copyright IBM Corp. 2016, 2022\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React, { useEffect, useState } from 'react';\nimport classNames from 'classnames';\nimport ddsSettings from '../../internal/vendor/@carbon/ibmdotcom-utilities/utilities/settings/settings';\nimport { HorizontalRule } from '../HorizontalRule';\nimport PropTypes from 'prop-types';\nimport settings from 'carbon-components/es/globals/js/settings';\nimport TOCDesktop from './TOCDesktop';\nimport TOCMobile from './TOCMobile';\nvar stablePrefix = ddsSettings.stablePrefix;\nvar prefix = settings.prefix;\n/**\n * loops into the array of elements and returns the values\n *\n * @private\n * @returns {Array} returns element name and data title\n */\n\nvar _findMenuItems = function _findMenuItems() {\n  var eles = document.querySelectorAll('a[name]');\n  var menuItems = [];\n  eles.forEach(function (element) {\n    if (element.getAttribute('name') !== 'menuLabel') {\n      menuItems.push({\n        id: element.getAttribute('name'),\n        title: element.getAttribute('data-title') || ''\n      });\n    }\n  });\n  return menuItems;\n};\n/**\n * Table of Contents pattern.\n */\n\n\nvar TableOfContents = function TableOfContents(_ref) {\n  var menuItems = _ref.menuItems,\n      children = _ref.children,\n      menuLabel = _ref.menuLabel,\n      theme = _ref.theme,\n      stickyOffset = _ref.stickyOffset,\n      menuRule = _ref.menuRule,\n      headingContent = _ref.headingContent;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      useMenuItems = _useState2[0],\n      setUseMenuItems = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedId = _useState4[0],\n      setSelectedId = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selectedTitle = _useState6[0],\n      setSelectedTitle = _useState6[1];\n\n  useEffect(function () {\n    setUseMenuItems((menuItems === null || menuItems === void 0 ? void 0 : menuItems.length) ? _toConsumableArray(menuItems) : _findMenuItems());\n  }, [children, menuItems]);\n  useEffect(function () {\n    var id = useMenuItems[0] ? useMenuItems[0].id : '';\n    var title = useMenuItems[0] ? useMenuItems[0].title : '';\n\n    if (id === 'menuLabel' && useMenuItems[1]) {\n      id = useMenuItems[1].id;\n      title = useMenuItems[1].title;\n    }\n\n    setSelectedId(id);\n    setSelectedTitle(title);\n  }, [useMenuItems]);\n  useEffect(function () {\n    /**\n     * Function to be added to eventListener and cleaned later on\n     */\n    var handleRAF = function handleRAF() {\n      window.requestAnimationFrame(setSelectedItem);\n    };\n\n    window.addEventListener('scroll', handleRAF);\n    return function () {\n      return window.removeEventListener('scroll', handleRAF);\n    };\n  });\n  /**\n   * Set selected id & title\n   *\n   */\n\n  var setSelectedItem = function setSelectedItem() {\n    var elems = getElemsInView();\n\n    if (elems) {\n      var _filteredItems$;\n\n      var id = elems || useMenuItems[0].id;\n      var filteredItems = useMenuItems.filter(function (menu) {\n        if (id !== 'undefined') {\n          return menu.id === id;\n        }\n      });\n      var title = (_filteredItems$ = filteredItems[0]) === null || _filteredItems$ === void 0 ? void 0 : _filteredItems$.title;\n\n      if (title !== undefined) {\n        setSelectedId(id);\n        setSelectedTitle(title);\n      }\n    }\n  };\n  /**\n   * Check whether provided anchor tags are in visible viewport\n   *\n   * @returns {string} name attribute\n   */\n\n\n  var getElemsInView = function getElemsInView() {\n    var items = _toConsumableArray(document.querySelectorAll('a[name]')).map(function (elem, index, arr) {\n      return {\n        elem: elem,\n        height: arr[index + 1] ? arr[index + 1].getBoundingClientRect().y - elem.getBoundingClientRect().y : null,\n        position: elem.getBoundingClientRect().y\n      };\n    }).filter(function (elem, index, arr) {\n      return elem.height === null ? arr[index - 1].position < arr[index - 1].height : elem.position - 50 - stickyOffset > -elem.height;\n    }); // Sets last section as active at the end of page in case there is not enough height for it to dynamically activate\n\n\n    var bottomReached = document.documentElement.scrollTop + document.documentElement.clientHeight === document.documentElement.scrollHeight;\n    return !bottomReached ? items[0].elem.getAttribute('name') : items[items.length - 1].elem.getAttribute('name');\n  };\n  /**\n   * Sets the selected menu item\n   *\n   * @param {*} id selected id of menu item\n   * @param {*} title selected title of menu item\n   */\n\n\n  var updateState = function updateState(id, title) {\n    setSelectedId(id);\n    setSelectedTitle(title);\n  };\n  /**\n   * Validate if the Menu Items has Id and Title filled\n   *\n   * @param {Array} menuItems array of Items\n   * @returns {Array} filtered array of items\n   */\n\n\n  var validateMenuItems = function validateMenuItems(menuItems) {\n    return menuItems.filter(function (item) {\n      var _item$title, _item$id;\n\n      return (item === null || item === void 0 ? void 0 : (_item$title = item.title) === null || _item$title === void 0 ? void 0 : _item$title.trim().length) && (item === null || item === void 0 ? void 0 : (_item$id = item.id) === null || _item$id === void 0 ? void 0 : _item$id.trim().length);\n    });\n  };\n  /**\n   * Props for TOCDesktop and TOCMobile\n   *\n   * @type {{\n   * updateState: Function,\n   * selectedId: string,\n   * menuItems: Array,\n   * selectedTitle: string,\n   * menuLabel: string\n   * children: object\n   * }}\n   */\n\n\n  var props = {\n    menuItems: validateMenuItems(useMenuItems),\n    selectedId: selectedId,\n    selectedTitle: selectedTitle,\n    menuLabel: menuLabel,\n    updateState: updateState,\n    children: children.length > 1 ? children[0] : null\n  };\n  /**\n   * Render TableOfContents pattern\n   *\n   * @returns {*} JSX Object\n   */\n\n  return /*#__PURE__*/React.createElement(\"section\", {\n    \"data-autoid\": \"\".concat(stablePrefix, \"--tableofcontents\"),\n    className: classNames(\"\".concat(prefix, \"--tableofcontents\"), _defineProperty({}, \"\".concat(prefix, \"--tableofcontents--\").concat(theme), theme))\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(stablePrefix, \"-ce--table-of-contents__container\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--tableofcontents__sidebar\")\n  }, headingContent && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--tableofcontents__desktop__children\")\n  }, headingContent, menuRule && /*#__PURE__*/React.createElement(HorizontalRule, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--tableofcontents__mobile-top\")\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'sticky',\n      top: stickyOffset ? \"\".concat(stickyOffset, \"px\") : 0\n    }\n  }, /*#__PURE__*/React.createElement(TOCDesktop, _extends({\n    menuRule: menuRule,\n    headingContent: headingContent\n  }, props)), /*#__PURE__*/React.createElement(TOCMobile, props))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--tableofcontents__content\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--tableofcontents__content-wrapper\")\n  }, headingContent !== undefined ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--tableofcontents__children__mobile\")\n  }, headingContent), children) : children))));\n};\n\nTableOfContents.propTypes = {\n  /**\n   * Array of menu item objects to render within the side nav.\n   * Each items has the following structure:\n   *\n   * | Properties Name | Data Type | Description     |\n   * | --------------- | --------- | --------------- |\n   * | title           | String    | Menu title text |\n   * | id              | String    | Menu id         |\n   *\n   * If `menuItems` is not passed in as a prop, the menu items are dynamically\n   * generated based on anchor links that exist on the page. The anchor links should\n   * follow the following format:\n   *\n   * ```html\n   * <a name=\"name-of-section\" data-title=\"Lorem Ipsum\"></a>\n   * ```\n   */\n  menuItems: PropTypes.arrayOf(PropTypes.shape({\n    title: PropTypes.string.isRequired,\n    id: PropTypes.string.isRequired\n  })),\n\n  /**\n   * Content to display next to the side nav.\n   */\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n\n  /**\n   * Placeholder value for menu label.\n   */\n  menuLabel: PropTypes.string,\n\n  /**\n   * Defines the color theme for the pattern. Choose from:\n   *\n   * | Name            | Description                              |\n   * | --------------- | ---------------------------------------- |\n   * | white / default | White theme applied to pattern           |\n   * | g10             | Gray 10 (g10) theme applied to pattern   |\n   * | g100            | Gray 100 (g100) theme applied to pattern |\n   */\n  theme: PropTypes.oneOf(['white', 'g10', 'g100']),\n\n  /**\n   * Defines the offset for the sticky column.\n   */\n  stickyOffset: PropTypes.number,\n\n  /**\n   * Defines if the menu ruler will be rendered.\n   */\n  menuRule: PropTypes.bool,\n\n  /**\n   * Content to be displayed above the navigation menu.\n   */\n  headingContent: PropTypes.node\n};\nTableOfContents.defaultProps = {\n  menuItems: null,\n  menuLabel: 'Jump to',\n  theme: 'white',\n  stickyOffset: null\n};\nexport default TableOfContents;"]},"metadata":{},"sourceType":"module"}