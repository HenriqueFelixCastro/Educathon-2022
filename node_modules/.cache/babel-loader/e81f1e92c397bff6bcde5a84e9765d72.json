{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n/**\n * Copyright IBM Corp. 2016, 2022\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport ComposedModal, { ModalBody, ModalHeader } from '../../internal/vendor/carbon-components-react/components/ComposedModal/ComposedModal';\nimport React, { useEffect, useState } from 'react';\nimport altlangs from '../../internal/vendor/@carbon/ibmdotcom-utilities/utilities/altlangs/altlangs';\nimport ArrowLeft20 from '@carbon/icons-react/es/arrow--left/20';\nimport cx from 'classnames';\nimport ddsSettings from '../../internal/vendor/@carbon/ibmdotcom-utilities/utilities/settings/settings';\nimport EarthFilled16 from '@carbon/icons-react/es/earth--filled/16';\nimport { LinkWithIcon } from '../LinkWithIcon';\nimport LocaleAPI from '../../internal/vendor/@carbon/ibmdotcom-services/services/Locale/Locale';\nimport LocaleModalCountries from './LocaleModalCountries';\nimport LocaleModalRegions from './LocaleModalRegions';\nimport PropTypes from 'prop-types';\nimport settings from 'carbon-components/es/globals/js/settings';\nvar stablePrefix = ddsSettings.stablePrefix;\nvar prefix = settings.prefix;\n/**\n * LocaleModal component.\n */\n\nvar LocaleModal = function LocaleModal(_ref) {\n  var isOpen = _ref.isOpen,\n      setIsOpen = _ref.setIsOpen,\n      localeData = _ref.localeData,\n      localeDisplay = _ref.localeDisplay;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      list = _useState2[0],\n      setList = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      langDisplay = _useState4[0],\n      setLangDisplay = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      modalLabels = _useState6[0],\n      setModalLabels = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isFiltering = _useState8[0],\n      setIsFiltering = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      clearResults = _useState10[0],\n      setClearResults = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      currentRegion = _useState12[0],\n      setCurrentRegion = _useState12[1];\n\n  var filterClass = cx(_defineProperty({}, \"\".concat(prefix, \"--locale-modal__filtering\"), isFiltering));\n  useEffect(function () {\n    var stale = false;\n\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var list, getLangDisplay, pair, locale;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(localeData && localeDisplay)) {\n                _context.next = 5;\n                break;\n              }\n\n              list = Object.assign({}, localeData);\n              getLangDisplay = localeDisplay;\n              _context.next = 17;\n              break;\n\n            case 5:\n              _context.next = 7;\n              return Promise.all([LocaleAPI.getLocale(), LocaleAPI.getLangDisplay()]);\n\n            case 7:\n              pair = _context.sent;\n\n              if (stale) {\n                _context.next = 17;\n                break;\n              }\n\n              locale = pair[0];\n              getLangDisplay = pair[1];\n              _context.t0 = locale;\n\n              if (!_context.t0) {\n                _context.next = 16;\n                break;\n              }\n\n              _context.next = 15;\n              return LocaleAPI.getList(locale);\n\n            case 15:\n              _context.t0 = _context.sent;\n\n            case 16:\n              list = _context.t0;\n\n            case 17:\n              setLangDisplay(getLangDisplay);\n              setList(list);\n              setModalLabels(list.localeModal);\n\n            case 20:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))(); // reset the country search results when clicking close icon or back to region button\n\n\n    if (clearResults) {\n      var localeItems = document.querySelectorAll(\".\".concat(prefix, \"--locale-modal__locales\"));\n      var localeHidden = \"\".concat(prefix, \"--locale-modal__locales-hidden\");\n\n      _toConsumableArray(localeItems).map(function (item) {\n        item.classList.remove(localeHidden);\n      });\n    }\n\n    return function () {\n      stale = true;\n    };\n  }, [clearResults, localeData, localeDisplay]);\n  useEffect(function () {\n    var _document$querySelect;\n\n    (_document$querySelect = document.querySelector(\".\".concat(prefix, \"--modal-header__heading\"))) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.setAttribute('tabindex', '0');\n    var localeModalContainer = document.querySelector(\".\".concat(prefix, \"--locale-modal-container .\").concat(prefix, \"--modal-container\"));\n    localeModalContainer === null || localeModalContainer === void 0 ? void 0 : localeModalContainer.setAttribute('role', 'dialog');\n    localeModalContainer === null || localeModalContainer === void 0 ? void 0 : localeModalContainer.setAttribute('aria-labelledby', modalLabels.headerTitle);\n    localeModalContainer === null || localeModalContainer === void 0 ? void 0 : localeModalContainer.setAttribute('tabindex', '-1');\n    localeModalContainer === null || localeModalContainer === void 0 ? void 0 : localeModalContainer.setAttribute('aria-modal', 'true');\n  });\n  return /*#__PURE__*/React.createElement(ComposedModal, {\n    open: isOpen,\n    onClose: function onClose() {\n      _close(setIsOpen);\n    },\n    className: \"\".concat(prefix, \"--locale-modal-container\"),\n    \"data-autoid\": \"\".concat(stablePrefix, \"--locale-modal\"),\n    selectorPrimaryFocus: \".\".concat(prefix, \"--modal-close\")\n  }, isFiltering ? /*#__PURE__*/React.createElement(ModalHeader, {\n    \"data-autoid\": \"\".concat(stablePrefix, \"--locale-modal__region-back\"),\n    label: [/*#__PURE__*/React.createElement(LinkWithIcon, {\n      href: \"#\",\n      iconPlacement: 'left'\n    }, /*#__PURE__*/React.createElement(\"span\", null, modalLabels.headerTitle), /*#__PURE__*/React.createElement(ArrowLeft20, {\n      className: \"\".concat(prefix, \"--locale-modal__label-arrow\"),\n      key: \"arrow-left\"\n    }))],\n    title: currentRegion,\n    className: \"\".concat(prefix, \"--locale-modal__back\")\n  }) : /*#__PURE__*/React.createElement(ModalHeader, {\n    label: [langDisplay, /*#__PURE__*/React.createElement(EarthFilled16, {\n      key: \"earthfilled\",\n      className: \"\".concat(prefix, \"--locale-modal__label-globe\")\n    })],\n    title: modalLabels.headerTitle,\n    iconDescription: modalLabels.modalClose\n  }), /*#__PURE__*/React.createElement(ModalBody, {\n    className: \"\".concat(prefix, \"--locale-modal \").concat(filterClass)\n  }, /*#__PURE__*/React.createElement(LocaleModalRegions, {\n    regionList: sortList(list),\n    setCurrentRegion: setCurrentRegion,\n    setIsFiltering: setIsFiltering,\n    setClearResults: setClearResults,\n    returnButtonLabel: modalLabels.headerTitle,\n    closeModalLabel: modalLabels.modalClose\n  }), /*#__PURE__*/React.createElement(LocaleModalCountries, _extends({\n    regionList: sortList(list),\n    setClearResults: setClearResults,\n    currentRegion: currentRegion\n  }, modalLabels))));\n};\n\nLocaleModal.propTypes = {\n  /**\n   * `true` to open modal in its initial state.\n   */\n  isOpen: PropTypes.bool,\n\n  /**\n   * The setter for `isOpen`.\n   */\n  setIsOpen: PropTypes.func,\n\n  /**\n   * Locale/Language data to bypass the service call.\n   */\n  localeData: PropTypes.shape({\n    regionList: PropTypes.arrayOf(PropTypes.shape({\n      name: PropTypes.string,\n      key: PropTypes.string,\n      countryList: PropTypes.shape({\n        name: PropTypes.string,\n        locale: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string))\n      })\n    })),\n    localeModal: PropTypes.shape({\n      headerTitle: PropTypes.string,\n      modalClose: PropTypes.string,\n      searchLabel: PropTypes.string,\n      searchClearText: PropTypes.string,\n      searchPlaceholder: PropTypes.string,\n      availabilityText: PropTypes.string,\n      unavailabilityText: PropTypes.string\n    })\n  }),\n\n  /**\n   * Display text for current locale/language to bypass service call.\n   */\n  localeDisplay: PropTypes.string\n};\nLocaleModal.defaultProps = {\n  isOpen: false,\n  setIsOpen: function setIsOpen() {},\n  localeData: null,\n  localeDisplay: null\n};\n/**\n *  New region/country list based lang attributes available on page\n *\n * @param {object} list country list\n *\n * @returns {object} list item\n */\n\nexport var sortList = function sortList(list) {\n  var pageLangs = altlangs();\n  var filterList = [];\n  list.regionList && list.regionList.map(function (region, index) {\n    filterList.push({\n      name: region.name,\n      key: region.key,\n      countries: []\n    });\n\n    var _loop = function _loop() {\n      var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n          key = _Object$entries$_i[0],\n          value = _Object$entries$_i[1];\n\n      region.countryList.map(function (country) {\n        country.locale.map(function (loc) {\n          if (loc[0].includes(key)) {\n            filterList[index].countries.push({\n              region: region.key,\n              name: country.name,\n              locale: loc[0],\n              language: loc[1],\n              href: value\n            });\n          }\n        });\n      });\n    };\n\n    for (var _i = 0, _Object$entries = Object.entries(pageLangs); _i < _Object$entries.length; _i++) {\n      _loop();\n    }\n\n    filterList[index].countries.sort(function (a, b) {\n      return a.name > b.name ? 1 : -1;\n    });\n  });\n  return filterList;\n};\n/**\n * Sets modal state to closed\n *\n * @private\n */\n\nexport var _close = function _close(setIsOpen) {\n  setIsOpen(false);\n  var footerBtn = document.querySelector(\".\".concat(prefix, \"--locale-btn__container .\").concat(prefix, \"--btn--secondary\"));\n  setTimeout(function () {\n    footerBtn === null || footerBtn === void 0 ? void 0 : footerBtn.focus();\n  }, 100);\n};\nexport default LocaleModal;","map":{"version":3,"sources":["/Users/henriquefelixcastro/Downloads/Educathon 2022/educathon-2022-website/node_modules/@carbon/ibmdotcom-react/es/components/LocaleModal/LocaleModal.js"],"names":["_extends","_toConsumableArray","_regeneratorRuntime","_asyncToGenerator","_defineProperty","_slicedToArray","ComposedModal","ModalBody","ModalHeader","React","useEffect","useState","altlangs","ArrowLeft20","cx","ddsSettings","EarthFilled16","LinkWithIcon","LocaleAPI","LocaleModalCountries","LocaleModalRegions","PropTypes","settings","stablePrefix","prefix","LocaleModal","_ref","isOpen","setIsOpen","localeData","localeDisplay","_useState","_useState2","list","setList","_useState3","_useState4","langDisplay","setLangDisplay","_useState5","_useState6","modalLabels","setModalLabels","_useState7","_useState8","isFiltering","setIsFiltering","_useState9","_useState10","clearResults","setClearResults","_useState11","_useState12","currentRegion","setCurrentRegion","filterClass","concat","stale","mark","_callee","getLangDisplay","pair","locale","wrap","_callee$","_context","prev","next","Object","assign","Promise","all","getLocale","sent","t0","getList","localeModal","stop","localeItems","document","querySelectorAll","localeHidden","map","item","classList","remove","_document$querySelect","querySelector","setAttribute","localeModalContainer","headerTitle","createElement","open","onClose","_close","className","selectorPrimaryFocus","label","href","iconPlacement","key","title","iconDescription","modalClose","regionList","sortList","returnButtonLabel","closeModalLabel","propTypes","bool","func","shape","arrayOf","name","string","countryList","searchLabel","searchClearText","searchPlaceholder","availabilityText","unavailabilityText","defaultProps","pageLangs","filterList","region","index","push","countries","_loop","_Object$entries$_i","_Object$entries","_i","value","country","loc","includes","language","entries","length","sort","a","b","footerBtn","setTimeout","focus"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\n/**\n * Copyright IBM Corp. 2016, 2022\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport ComposedModal, { ModalBody, ModalHeader } from '../../internal/vendor/carbon-components-react/components/ComposedModal/ComposedModal';\nimport React, { useEffect, useState } from 'react';\nimport altlangs from '../../internal/vendor/@carbon/ibmdotcom-utilities/utilities/altlangs/altlangs';\nimport ArrowLeft20 from '@carbon/icons-react/es/arrow--left/20';\nimport cx from 'classnames';\nimport ddsSettings from '../../internal/vendor/@carbon/ibmdotcom-utilities/utilities/settings/settings';\nimport EarthFilled16 from '@carbon/icons-react/es/earth--filled/16';\nimport { LinkWithIcon } from '../LinkWithIcon';\nimport LocaleAPI from '../../internal/vendor/@carbon/ibmdotcom-services/services/Locale/Locale';\nimport LocaleModalCountries from './LocaleModalCountries';\nimport LocaleModalRegions from './LocaleModalRegions';\nimport PropTypes from 'prop-types';\nimport settings from 'carbon-components/es/globals/js/settings';\nvar stablePrefix = ddsSettings.stablePrefix;\nvar prefix = settings.prefix;\n/**\n * LocaleModal component.\n */\n\nvar LocaleModal = function LocaleModal(_ref) {\n  var isOpen = _ref.isOpen,\n      setIsOpen = _ref.setIsOpen,\n      localeData = _ref.localeData,\n      localeDisplay = _ref.localeDisplay;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      list = _useState2[0],\n      setList = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      langDisplay = _useState4[0],\n      setLangDisplay = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      modalLabels = _useState6[0],\n      setModalLabels = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isFiltering = _useState8[0],\n      setIsFiltering = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      clearResults = _useState10[0],\n      setClearResults = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      currentRegion = _useState12[0],\n      setCurrentRegion = _useState12[1];\n\n  var filterClass = cx(_defineProperty({}, \"\".concat(prefix, \"--locale-modal__filtering\"), isFiltering));\n  useEffect(function () {\n    var stale = false;\n\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var list, getLangDisplay, pair, locale;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(localeData && localeDisplay)) {\n                _context.next = 5;\n                break;\n              }\n\n              list = Object.assign({}, localeData);\n              getLangDisplay = localeDisplay;\n              _context.next = 17;\n              break;\n\n            case 5:\n              _context.next = 7;\n              return Promise.all([LocaleAPI.getLocale(), LocaleAPI.getLangDisplay()]);\n\n            case 7:\n              pair = _context.sent;\n\n              if (stale) {\n                _context.next = 17;\n                break;\n              }\n\n              locale = pair[0];\n              getLangDisplay = pair[1];\n              _context.t0 = locale;\n\n              if (!_context.t0) {\n                _context.next = 16;\n                break;\n              }\n\n              _context.next = 15;\n              return LocaleAPI.getList(locale);\n\n            case 15:\n              _context.t0 = _context.sent;\n\n            case 16:\n              list = _context.t0;\n\n            case 17:\n              setLangDisplay(getLangDisplay);\n              setList(list);\n              setModalLabels(list.localeModal);\n\n            case 20:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))(); // reset the country search results when clicking close icon or back to region button\n\n\n    if (clearResults) {\n      var localeItems = document.querySelectorAll(\".\".concat(prefix, \"--locale-modal__locales\"));\n      var localeHidden = \"\".concat(prefix, \"--locale-modal__locales-hidden\");\n\n      _toConsumableArray(localeItems).map(function (item) {\n        item.classList.remove(localeHidden);\n      });\n    }\n\n    return function () {\n      stale = true;\n    };\n  }, [clearResults, localeData, localeDisplay]);\n  useEffect(function () {\n    var _document$querySelect;\n\n    (_document$querySelect = document.querySelector(\".\".concat(prefix, \"--modal-header__heading\"))) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.setAttribute('tabindex', '0');\n    var localeModalContainer = document.querySelector(\".\".concat(prefix, \"--locale-modal-container .\").concat(prefix, \"--modal-container\"));\n    localeModalContainer === null || localeModalContainer === void 0 ? void 0 : localeModalContainer.setAttribute('role', 'dialog');\n    localeModalContainer === null || localeModalContainer === void 0 ? void 0 : localeModalContainer.setAttribute('aria-labelledby', modalLabels.headerTitle);\n    localeModalContainer === null || localeModalContainer === void 0 ? void 0 : localeModalContainer.setAttribute('tabindex', '-1');\n    localeModalContainer === null || localeModalContainer === void 0 ? void 0 : localeModalContainer.setAttribute('aria-modal', 'true');\n  });\n  return /*#__PURE__*/React.createElement(ComposedModal, {\n    open: isOpen,\n    onClose: function onClose() {\n      _close(setIsOpen);\n    },\n    className: \"\".concat(prefix, \"--locale-modal-container\"),\n    \"data-autoid\": \"\".concat(stablePrefix, \"--locale-modal\"),\n    selectorPrimaryFocus: \".\".concat(prefix, \"--modal-close\")\n  }, isFiltering ? /*#__PURE__*/React.createElement(ModalHeader, {\n    \"data-autoid\": \"\".concat(stablePrefix, \"--locale-modal__region-back\"),\n    label: [/*#__PURE__*/React.createElement(LinkWithIcon, {\n      href: \"#\",\n      iconPlacement: 'left'\n    }, /*#__PURE__*/React.createElement(\"span\", null, modalLabels.headerTitle), /*#__PURE__*/React.createElement(ArrowLeft20, {\n      className: \"\".concat(prefix, \"--locale-modal__label-arrow\"),\n      key: \"arrow-left\"\n    }))],\n    title: currentRegion,\n    className: \"\".concat(prefix, \"--locale-modal__back\")\n  }) : /*#__PURE__*/React.createElement(ModalHeader, {\n    label: [langDisplay, /*#__PURE__*/React.createElement(EarthFilled16, {\n      key: \"earthfilled\",\n      className: \"\".concat(prefix, \"--locale-modal__label-globe\")\n    })],\n    title: modalLabels.headerTitle,\n    iconDescription: modalLabels.modalClose\n  }), /*#__PURE__*/React.createElement(ModalBody, {\n    className: \"\".concat(prefix, \"--locale-modal \").concat(filterClass)\n  }, /*#__PURE__*/React.createElement(LocaleModalRegions, {\n    regionList: sortList(list),\n    setCurrentRegion: setCurrentRegion,\n    setIsFiltering: setIsFiltering,\n    setClearResults: setClearResults,\n    returnButtonLabel: modalLabels.headerTitle,\n    closeModalLabel: modalLabels.modalClose\n  }), /*#__PURE__*/React.createElement(LocaleModalCountries, _extends({\n    regionList: sortList(list),\n    setClearResults: setClearResults,\n    currentRegion: currentRegion\n  }, modalLabels))));\n};\n\nLocaleModal.propTypes = {\n  /**\n   * `true` to open modal in its initial state.\n   */\n  isOpen: PropTypes.bool,\n\n  /**\n   * The setter for `isOpen`.\n   */\n  setIsOpen: PropTypes.func,\n\n  /**\n   * Locale/Language data to bypass the service call.\n   */\n  localeData: PropTypes.shape({\n    regionList: PropTypes.arrayOf(PropTypes.shape({\n      name: PropTypes.string,\n      key: PropTypes.string,\n      countryList: PropTypes.shape({\n        name: PropTypes.string,\n        locale: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string))\n      })\n    })),\n    localeModal: PropTypes.shape({\n      headerTitle: PropTypes.string,\n      modalClose: PropTypes.string,\n      searchLabel: PropTypes.string,\n      searchClearText: PropTypes.string,\n      searchPlaceholder: PropTypes.string,\n      availabilityText: PropTypes.string,\n      unavailabilityText: PropTypes.string\n    })\n  }),\n\n  /**\n   * Display text for current locale/language to bypass service call.\n   */\n  localeDisplay: PropTypes.string\n};\nLocaleModal.defaultProps = {\n  isOpen: false,\n  setIsOpen: function setIsOpen() {},\n  localeData: null,\n  localeDisplay: null\n};\n/**\n *  New region/country list based lang attributes available on page\n *\n * @param {object} list country list\n *\n * @returns {object} list item\n */\n\nexport var sortList = function sortList(list) {\n  var pageLangs = altlangs();\n  var filterList = [];\n  list.regionList && list.regionList.map(function (region, index) {\n    filterList.push({\n      name: region.name,\n      key: region.key,\n      countries: []\n    });\n\n    var _loop = function _loop() {\n      var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n          key = _Object$entries$_i[0],\n          value = _Object$entries$_i[1];\n\n      region.countryList.map(function (country) {\n        country.locale.map(function (loc) {\n          if (loc[0].includes(key)) {\n            filterList[index].countries.push({\n              region: region.key,\n              name: country.name,\n              locale: loc[0],\n              language: loc[1],\n              href: value\n            });\n          }\n        });\n      });\n    };\n\n    for (var _i = 0, _Object$entries = Object.entries(pageLangs); _i < _Object$entries.length; _i++) {\n      _loop();\n    }\n\n    filterList[index].countries.sort(function (a, b) {\n      return a.name > b.name ? 1 : -1;\n    });\n  });\n  return filterList;\n};\n/**\n * Sets modal state to closed\n *\n * @private\n */\n\nexport var _close = function _close(setIsOpen) {\n  setIsOpen(false);\n  var footerBtn = document.querySelector(\".\".concat(prefix, \"--locale-btn__container .\").concat(prefix, \"--btn--secondary\"));\n  setTimeout(function () {\n    footerBtn === null || footerBtn === void 0 ? void 0 : footerBtn.focus();\n  }, 100);\n};\nexport default LocaleModal;"]},"metadata":{},"sourceType":"module"}