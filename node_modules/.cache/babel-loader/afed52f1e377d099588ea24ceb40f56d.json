{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\n\nvar _Modal$propTypes;\n\nvar _excluded = [\"children\", \"className\", \"modalHeading\", \"modalLabel\", \"modalAriaLabel\", \"passiveModal\", \"hasForm\", \"secondaryButtonText\", \"primaryButtonText\", \"open\", \"onRequestClose\", \"onRequestSubmit\", \"onSecondarySubmit\", \"iconDescription\", \"primaryButtonDisabled\", \"danger\", \"alert\", \"secondaryButtons\", \"selectorPrimaryFocus\", \"selectorsFloatingMenus\", \"shouldSubmitOnEnter\", \"size\", \"hasScrollingContent\", \"closeButtonLabel\", \"preventCloseOnClickOutside\"];\n/**\n * Copyright IBM Corp. 2016, 2018\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport PropTypes from 'prop-types';\nimport React, { useRef, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { Close20 } from '@carbon/icons-react';\nimport toggleClass from '../../../tools/toggleClass';\nimport Button from '../../Button';\nimport ButtonSet from '../../ButtonSet';\nimport deprecate from '../../../prop-types/deprecate';\nimport requiredIfGivenPropIsTruthy from '../../../prop-types/requiredIfGivenPropIsTruthy';\nimport wrapFocus, { elementOrParentIsFloatingMenu } from '../../../internal/wrapFocus';\nimport setupGetInstanceId from '../../../tools/setupGetInstanceId';\nimport { usePrefix } from '../../../internal/usePrefix';\nvar getInstanceId = setupGetInstanceId();\nvar Modal = /*#__PURE__*/React.forwardRef(function Modal(_ref, ref) {\n  var _classNames, _classNames3;\n\n  var children = _ref.children,\n      className = _ref.className,\n      modalHeading = _ref.modalHeading,\n      modalLabel = _ref.modalLabel,\n      modalAriaLabel = _ref.modalAriaLabel,\n      passiveModal = _ref.passiveModal,\n      hasForm = _ref.hasForm,\n      secondaryButtonText = _ref.secondaryButtonText,\n      primaryButtonText = _ref.primaryButtonText,\n      open = _ref.open,\n      onRequestClose = _ref.onRequestClose,\n      onRequestSubmit = _ref.onRequestSubmit,\n      onSecondarySubmit = _ref.onSecondarySubmit,\n      iconDescription = _ref.iconDescription,\n      primaryButtonDisabled = _ref.primaryButtonDisabled,\n      danger = _ref.danger,\n      alert = _ref.alert,\n      secondaryButtons = _ref.secondaryButtons,\n      selectorPrimaryFocus = _ref.selectorPrimaryFocus,\n      selectorsFloatingMenus = _ref.selectorsFloatingMenus,\n      shouldSubmitOnEnter = _ref.shouldSubmitOnEnter,\n      size = _ref.size,\n      hasScrollingContent = _ref.hasScrollingContent,\n      closeButtonLabel = _ref.closeButtonLabel,\n      preventCloseOnClickOutside = _ref.preventCloseOnClickOutside,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var prefix = usePrefix();\n  var button = useRef();\n  var secondaryButton = useRef();\n  var innerModal = useRef();\n  var startTrap = useRef();\n  var endTrap = useRef();\n  var modalInstanceId = \"modal-\".concat(getInstanceId());\n  var modalLabelId = \"\".concat(prefix, \"--modal-header__label--\").concat(modalInstanceId);\n  var modalHeadingId = \"\".concat(prefix, \"--modal-header__heading--\").concat(modalInstanceId);\n  var modalBodyId = \"\".concat(prefix, \"--modal-body--\").concat(modalInstanceId);\n  var modalCloseButtonClass = \"\".concat(prefix, \"--modal-close\");\n\n  function isCloseButton(element) {\n    return !onSecondarySubmit && element === secondaryButton.current || element.classList.contains(modalCloseButtonClass);\n  }\n\n  function handleKeyDown(evt) {\n    if (open) {\n      if (evt.which === 27) {\n        onRequestClose(evt);\n      }\n\n      if (evt.which === 13 && shouldSubmitOnEnter && !isCloseButton(evt.target)) {\n        onRequestSubmit(evt);\n      }\n    }\n  }\n\n  function handleMousedown(evt) {\n    if (innerModal.current && !innerModal.current.contains(evt.target) && !elementOrParentIsFloatingMenu(evt.target, selectorsFloatingMenus) && !preventCloseOnClickOutside) {\n      onRequestClose(evt);\n    }\n  }\n\n  function handleBlur(_ref2) {\n    var oldActiveNode = _ref2.target,\n        currentActiveNode = _ref2.relatedTarget;\n\n    if (open && currentActiveNode && oldActiveNode) {\n      var bodyNode = innerModal.current;\n      var startTrapNode = startTrap.current;\n      var endTrapNode = endTrap.current;\n      wrapFocus({\n        bodyNode: bodyNode,\n        startTrapNode: startTrapNode,\n        endTrapNode: endTrapNode,\n        currentActiveNode: currentActiveNode,\n        oldActiveNode: oldActiveNode,\n        selectorsFloatingMenus: selectorsFloatingMenus\n      });\n    }\n  }\n\n  var onSecondaryButtonClick = onSecondarySubmit ? onSecondarySubmit : onRequestClose;\n  var modalClasses = classNames(\"\".concat(prefix, \"--modal\"), (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefix, \"--modal-tall\"), !passiveModal), _defineProperty(_classNames, 'is-visible', open), _defineProperty(_classNames, \"\".concat(prefix, \"--modal--danger\"), danger), _defineProperty(_classNames, className, className), _classNames));\n  var containerClasses = classNames(\"\".concat(prefix, \"--modal-container\"), _defineProperty({}, \"\".concat(prefix, \"--modal-container--\").concat(size), size));\n  var contentClasses = classNames(\"\".concat(prefix, \"--modal-content\"), (_classNames3 = {}, _defineProperty(_classNames3, \"\".concat(prefix, \"--modal-content--with-form\"), hasForm), _defineProperty(_classNames3, \"\".concat(prefix, \"--modal-scroll-content\"), hasScrollingContent), _classNames3));\n  var footerClasses = classNames(\"\".concat(prefix, \"--modal-footer\"), _defineProperty({}, \"\".concat(prefix, \"--modal-footer--three-button\"), Array.isArray(secondaryButtons) && secondaryButtons.length === 2));\n  var modalButton = /*#__PURE__*/React.createElement(\"button\", {\n    className: modalCloseButtonClass,\n    type: \"button\",\n    onClick: onRequestClose,\n    title: ariaLabel ? ariaLabel : iconDescription,\n    \"aria-label\": closeButtonLabel ? closeButtonLabel : 'close',\n    ref: button\n  }, /*#__PURE__*/React.createElement(Close20, {\n    \"aria-hidden\": \"true\",\n    tabIndex: \"-1\",\n    className: \"\".concat(modalCloseButtonClass, \"__icon\")\n  }));\n  var ariaLabel = modalLabel || ['aria-label'] || modalAriaLabel || modalHeading;\n  var getAriaLabelledBy = modalLabel ? modalLabelId : modalHeadingId;\n  var hasScrollingContentProps = hasScrollingContent ? {\n    tabIndex: 0,\n    role: 'region',\n    'aria-label': ariaLabel,\n    'aria-labelledby': getAriaLabelledBy\n  } : {};\n  var alertDialogProps = {};\n\n  if (alert && passiveModal) {\n    alertDialogProps.role = 'alert';\n  }\n\n  if (alert && !passiveModal) {\n    alertDialogProps.role = 'alertdialog';\n    alertDialogProps['aria-describedby'] = modalBodyId;\n  }\n\n  useEffect(function () {\n    return function () {\n      toggleClass(document.body, \"\".concat(prefix, \"--body--with-modal-open\"), false);\n    };\n  }, [prefix]);\n  useEffect(function () {\n    toggleClass(document.body, \"\".concat(prefix, \"--body--with-modal-open\"), open);\n  }, [open, prefix]);\n  useEffect(function () {\n    var initialFocus = function initialFocus(focusContainerElement) {\n      var containerElement = focusContainerElement || innerModal.current;\n      var primaryFocusElement = containerElement ? containerElement.querySelector(selectorPrimaryFocus) : null;\n\n      if (primaryFocusElement) {\n        return primaryFocusElement;\n      }\n\n      return button && button.current;\n    };\n\n    var focusButton = function focusButton(focusContainerElement) {\n      var target = initialFocus(focusContainerElement);\n\n      if (target) {\n        target.focus();\n      }\n    };\n\n    if (open) {\n      focusButton(innerModal.current);\n    }\n  }, [open, selectorPrimaryFocus]);\n  var modalBody = /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: innerModal,\n    role: \"dialog\"\n  }, alertDialogProps, {\n    className: containerClasses,\n    \"aria-label\": ariaLabel,\n    \"aria-modal\": \"true\",\n    tabIndex: \"-1\"\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--modal-header\")\n  }, passiveModal && modalButton, modalLabel && /*#__PURE__*/React.createElement(\"h2\", {\n    id: modalLabelId,\n    className: \"\".concat(prefix, \"--modal-header__label\")\n  }, modalLabel), /*#__PURE__*/React.createElement(\"h3\", {\n    id: modalHeadingId,\n    className: \"\".concat(prefix, \"--modal-header__heading\")\n  }, modalHeading), !passiveModal && modalButton), /*#__PURE__*/React.createElement(\"div\", _extends({\n    id: modalBodyId,\n    className: contentClasses\n  }, hasScrollingContentProps, {\n    \"aria-labelledby\": getAriaLabelledBy\n  }), children), hasScrollingContent && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--modal-content--overflow-indicator\")\n  }), !passiveModal && /*#__PURE__*/React.createElement(ButtonSet, {\n    className: footerClasses\n  }, Array.isArray(secondaryButtons) && secondaryButtons.length <= 2 ? secondaryButtons.map(function (_ref3, i) {\n    var buttonText = _ref3.buttonText,\n        onButtonClick = _ref3.onClick;\n    return /*#__PURE__*/React.createElement(Button, {\n      key: \"\".concat(buttonText, \"-\").concat(i),\n      kind: \"secondary\",\n      onClick: onButtonClick\n    }, buttonText);\n  }) : secondaryButtonText && /*#__PURE__*/React.createElement(Button, {\n    kind: \"secondary\",\n    onClick: onSecondaryButtonClick,\n    ref: secondaryButton\n  }, secondaryButtonText), /*#__PURE__*/React.createElement(Button, {\n    kind: danger ? 'danger' : 'primary',\n    disabled: primaryButtonDisabled,\n    onClick: onRequestSubmit,\n    ref: button\n  }, primaryButtonText)));\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, rest, {\n    onKeyDown: handleKeyDown,\n    onMouseDown: handleMousedown,\n    onBlur: handleBlur,\n    className: modalClasses,\n    role: \"presentation\",\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    ref: startTrap,\n    tabIndex: \"0\",\n    role: \"link\",\n    className: \"\".concat(prefix, \"--visually-hidden\")\n  }, \"Focus sentinel\"), modalBody, /*#__PURE__*/React.createElement(\"span\", {\n    ref: endTrap,\n    tabIndex: \"0\",\n    role: \"link\",\n    className: \"\".concat(prefix, \"--visually-hidden\")\n  }, \"Focus sentinel\"));\n});\nModal.propTypes = (_Modal$propTypes = {\n  /**\n   * Specify whether the Modal is displaying an alert, error or warning\n   * Should go hand in hand with the danger prop.\n   */\n  alert: PropTypes.bool\n}, _defineProperty(_Modal$propTypes, 'aria-label', requiredIfGivenPropIsTruthy('hasScrollingContent', PropTypes.string)), _defineProperty(_Modal$propTypes, \"children\", PropTypes.node), _defineProperty(_Modal$propTypes, \"className\", PropTypes.string), _defineProperty(_Modal$propTypes, \"closeButtonLabel\", PropTypes.string), _defineProperty(_Modal$propTypes, \"danger\", PropTypes.bool), _defineProperty(_Modal$propTypes, \"focusTrap\", deprecate(PropTypes.bool, \"\\nThe prop `focusTrap` for Modal has been deprecated, as the feature of `focusTrap` runs by default.\")), _defineProperty(_Modal$propTypes, \"hasForm\", deprecate(PropTypes.bool, \"\\nThe prop `hasForm` for Modal has been deprecated, as the feature of `hasForm` runs by default.\")), _defineProperty(_Modal$propTypes, \"hasScrollingContent\", PropTypes.bool), _defineProperty(_Modal$propTypes, \"iconDescription\", deprecate(PropTypes.string, 'The iconDescription prop is no longer needed and can be safely removed. This prop will be removed in the next major release of Carbon.')), _defineProperty(_Modal$propTypes, \"id\", PropTypes.string), _defineProperty(_Modal$propTypes, \"modalAriaLabel\", PropTypes.string), _defineProperty(_Modal$propTypes, \"modalHeading\", PropTypes.node), _defineProperty(_Modal$propTypes, \"modalLabel\", PropTypes.node), _defineProperty(_Modal$propTypes, \"onKeyDown\", PropTypes.func), _defineProperty(_Modal$propTypes, \"onRequestClose\", PropTypes.func), _defineProperty(_Modal$propTypes, \"onRequestSubmit\", PropTypes.func), _defineProperty(_Modal$propTypes, \"onSecondarySubmit\", PropTypes.func), _defineProperty(_Modal$propTypes, \"open\", PropTypes.bool), _defineProperty(_Modal$propTypes, \"passiveModal\", PropTypes.bool), _defineProperty(_Modal$propTypes, \"preventCloseOnClickOutside\", PropTypes.bool), _defineProperty(_Modal$propTypes, \"primaryButtonDisabled\", PropTypes.bool), _defineProperty(_Modal$propTypes, \"primaryButtonText\", PropTypes.node), _defineProperty(_Modal$propTypes, \"secondaryButtonText\", PropTypes.node), _defineProperty(_Modal$propTypes, \"secondaryButtons\", function secondaryButtons(props, propName, componentName) {\n  if (props.secondaryButtons) {\n    if (!Array.isArray(props.secondaryButtons) || props.secondaryButtons.length !== 2) {\n      return new Error(\"\".concat(propName, \" needs to be an array of two button config objects\"));\n    }\n\n    var shape = {\n      buttonText: PropTypes.node,\n      onClick: PropTypes.func\n    };\n    props[propName].forEach(function (secondaryButton) {\n      PropTypes.checkPropTypes(shape, secondaryButton, propName, componentName);\n    });\n  }\n\n  return null;\n}), _defineProperty(_Modal$propTypes, \"selectorPrimaryFocus\", PropTypes.string), _defineProperty(_Modal$propTypes, \"selectorsFloatingMenus\", PropTypes.arrayOf(PropTypes.string)), _defineProperty(_Modal$propTypes, \"shouldSubmitOnEnter\", PropTypes.bool), _defineProperty(_Modal$propTypes, \"size\", PropTypes.oneOf(['xs', 'sm', 'md', 'lg'])), _Modal$propTypes);\nModal.defaultProps = {\n  onRequestClose: function onRequestClose() {},\n  onRequestSubmit: function onRequestSubmit() {},\n  primaryButtonDisabled: false,\n  onKeyDown: function onKeyDown() {},\n  passiveModal: false,\n  modalHeading: '',\n  modalLabel: '',\n  preventCloseOnClickOutside: false,\n  selectorPrimaryFocus: '[data-modal-primary-focus]',\n  hasScrollingContent: false\n};\nexport default Modal;","map":{"version":3,"sources":["/Users/henriquefelixcastro/Downloads/Educathon 2022/educathon-2022-website/node_modules/carbon-components-react/es/components/Modal/next/Modal.js"],"names":["_extends","_defineProperty","_objectWithoutProperties","_Modal$propTypes","_excluded","PropTypes","React","useRef","useEffect","classNames","Close20","toggleClass","Button","ButtonSet","deprecate","requiredIfGivenPropIsTruthy","wrapFocus","elementOrParentIsFloatingMenu","setupGetInstanceId","usePrefix","getInstanceId","Modal","forwardRef","_ref","ref","_classNames","_classNames3","children","className","modalHeading","modalLabel","modalAriaLabel","passiveModal","hasForm","secondaryButtonText","primaryButtonText","open","onRequestClose","onRequestSubmit","onSecondarySubmit","iconDescription","primaryButtonDisabled","danger","alert","secondaryButtons","selectorPrimaryFocus","selectorsFloatingMenus","shouldSubmitOnEnter","size","hasScrollingContent","closeButtonLabel","preventCloseOnClickOutside","rest","prefix","button","secondaryButton","innerModal","startTrap","endTrap","modalInstanceId","concat","modalLabelId","modalHeadingId","modalBodyId","modalCloseButtonClass","isCloseButton","element","current","classList","contains","handleKeyDown","evt","which","target","handleMousedown","handleBlur","_ref2","oldActiveNode","currentActiveNode","relatedTarget","bodyNode","startTrapNode","endTrapNode","onSecondaryButtonClick","modalClasses","containerClasses","contentClasses","footerClasses","Array","isArray","length","modalButton","createElement","type","onClick","title","ariaLabel","tabIndex","getAriaLabelledBy","hasScrollingContentProps","role","alertDialogProps","document","body","initialFocus","focusContainerElement","containerElement","primaryFocusElement","querySelector","focusButton","focus","modalBody","id","map","_ref3","i","buttonText","onButtonClick","key","kind","disabled","onKeyDown","onMouseDown","onBlur","propTypes","bool","string","node","func","props","propName","componentName","Error","shape","forEach","checkPropTypes","arrayOf","oneOf","defaultProps"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\n\nvar _Modal$propTypes;\n\nvar _excluded = [\"children\", \"className\", \"modalHeading\", \"modalLabel\", \"modalAriaLabel\", \"passiveModal\", \"hasForm\", \"secondaryButtonText\", \"primaryButtonText\", \"open\", \"onRequestClose\", \"onRequestSubmit\", \"onSecondarySubmit\", \"iconDescription\", \"primaryButtonDisabled\", \"danger\", \"alert\", \"secondaryButtons\", \"selectorPrimaryFocus\", \"selectorsFloatingMenus\", \"shouldSubmitOnEnter\", \"size\", \"hasScrollingContent\", \"closeButtonLabel\", \"preventCloseOnClickOutside\"];\n\n/**\n * Copyright IBM Corp. 2016, 2018\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport PropTypes from 'prop-types';\nimport React, { useRef, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { Close20 } from '@carbon/icons-react';\nimport toggleClass from '../../../tools/toggleClass';\nimport Button from '../../Button';\nimport ButtonSet from '../../ButtonSet';\nimport deprecate from '../../../prop-types/deprecate';\nimport requiredIfGivenPropIsTruthy from '../../../prop-types/requiredIfGivenPropIsTruthy';\nimport wrapFocus, { elementOrParentIsFloatingMenu } from '../../../internal/wrapFocus';\nimport setupGetInstanceId from '../../../tools/setupGetInstanceId';\nimport { usePrefix } from '../../../internal/usePrefix';\nvar getInstanceId = setupGetInstanceId();\nvar Modal = /*#__PURE__*/React.forwardRef(function Modal(_ref, ref) {\n  var _classNames, _classNames3;\n\n  var children = _ref.children,\n      className = _ref.className,\n      modalHeading = _ref.modalHeading,\n      modalLabel = _ref.modalLabel,\n      modalAriaLabel = _ref.modalAriaLabel,\n      passiveModal = _ref.passiveModal,\n      hasForm = _ref.hasForm,\n      secondaryButtonText = _ref.secondaryButtonText,\n      primaryButtonText = _ref.primaryButtonText,\n      open = _ref.open,\n      onRequestClose = _ref.onRequestClose,\n      onRequestSubmit = _ref.onRequestSubmit,\n      onSecondarySubmit = _ref.onSecondarySubmit,\n      iconDescription = _ref.iconDescription,\n      primaryButtonDisabled = _ref.primaryButtonDisabled,\n      danger = _ref.danger,\n      alert = _ref.alert,\n      secondaryButtons = _ref.secondaryButtons,\n      selectorPrimaryFocus = _ref.selectorPrimaryFocus,\n      selectorsFloatingMenus = _ref.selectorsFloatingMenus,\n      shouldSubmitOnEnter = _ref.shouldSubmitOnEnter,\n      size = _ref.size,\n      hasScrollingContent = _ref.hasScrollingContent,\n      closeButtonLabel = _ref.closeButtonLabel,\n      preventCloseOnClickOutside = _ref.preventCloseOnClickOutside,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var prefix = usePrefix();\n  var button = useRef();\n  var secondaryButton = useRef();\n  var innerModal = useRef();\n  var startTrap = useRef();\n  var endTrap = useRef();\n  var modalInstanceId = \"modal-\".concat(getInstanceId());\n  var modalLabelId = \"\".concat(prefix, \"--modal-header__label--\").concat(modalInstanceId);\n  var modalHeadingId = \"\".concat(prefix, \"--modal-header__heading--\").concat(modalInstanceId);\n  var modalBodyId = \"\".concat(prefix, \"--modal-body--\").concat(modalInstanceId);\n  var modalCloseButtonClass = \"\".concat(prefix, \"--modal-close\");\n\n  function isCloseButton(element) {\n    return !onSecondarySubmit && element === secondaryButton.current || element.classList.contains(modalCloseButtonClass);\n  }\n\n  function handleKeyDown(evt) {\n    if (open) {\n      if (evt.which === 27) {\n        onRequestClose(evt);\n      }\n\n      if (evt.which === 13 && shouldSubmitOnEnter && !isCloseButton(evt.target)) {\n        onRequestSubmit(evt);\n      }\n    }\n  }\n\n  function handleMousedown(evt) {\n    if (innerModal.current && !innerModal.current.contains(evt.target) && !elementOrParentIsFloatingMenu(evt.target, selectorsFloatingMenus) && !preventCloseOnClickOutside) {\n      onRequestClose(evt);\n    }\n  }\n\n  function handleBlur(_ref2) {\n    var oldActiveNode = _ref2.target,\n        currentActiveNode = _ref2.relatedTarget;\n\n    if (open && currentActiveNode && oldActiveNode) {\n      var bodyNode = innerModal.current;\n      var startTrapNode = startTrap.current;\n      var endTrapNode = endTrap.current;\n      wrapFocus({\n        bodyNode: bodyNode,\n        startTrapNode: startTrapNode,\n        endTrapNode: endTrapNode,\n        currentActiveNode: currentActiveNode,\n        oldActiveNode: oldActiveNode,\n        selectorsFloatingMenus: selectorsFloatingMenus\n      });\n    }\n  }\n\n  var onSecondaryButtonClick = onSecondarySubmit ? onSecondarySubmit : onRequestClose;\n  var modalClasses = classNames(\"\".concat(prefix, \"--modal\"), (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefix, \"--modal-tall\"), !passiveModal), _defineProperty(_classNames, 'is-visible', open), _defineProperty(_classNames, \"\".concat(prefix, \"--modal--danger\"), danger), _defineProperty(_classNames, className, className), _classNames));\n  var containerClasses = classNames(\"\".concat(prefix, \"--modal-container\"), _defineProperty({}, \"\".concat(prefix, \"--modal-container--\").concat(size), size));\n  var contentClasses = classNames(\"\".concat(prefix, \"--modal-content\"), (_classNames3 = {}, _defineProperty(_classNames3, \"\".concat(prefix, \"--modal-content--with-form\"), hasForm), _defineProperty(_classNames3, \"\".concat(prefix, \"--modal-scroll-content\"), hasScrollingContent), _classNames3));\n  var footerClasses = classNames(\"\".concat(prefix, \"--modal-footer\"), _defineProperty({}, \"\".concat(prefix, \"--modal-footer--three-button\"), Array.isArray(secondaryButtons) && secondaryButtons.length === 2));\n  var modalButton = /*#__PURE__*/React.createElement(\"button\", {\n    className: modalCloseButtonClass,\n    type: \"button\",\n    onClick: onRequestClose,\n    title: ariaLabel ? ariaLabel : iconDescription,\n    \"aria-label\": closeButtonLabel ? closeButtonLabel : 'close',\n    ref: button\n  }, /*#__PURE__*/React.createElement(Close20, {\n    \"aria-hidden\": \"true\",\n    tabIndex: \"-1\",\n    className: \"\".concat(modalCloseButtonClass, \"__icon\")\n  }));\n  var ariaLabel = modalLabel || ['aria-label'] || modalAriaLabel || modalHeading;\n  var getAriaLabelledBy = modalLabel ? modalLabelId : modalHeadingId;\n  var hasScrollingContentProps = hasScrollingContent ? {\n    tabIndex: 0,\n    role: 'region',\n    'aria-label': ariaLabel,\n    'aria-labelledby': getAriaLabelledBy\n  } : {};\n  var alertDialogProps = {};\n\n  if (alert && passiveModal) {\n    alertDialogProps.role = 'alert';\n  }\n\n  if (alert && !passiveModal) {\n    alertDialogProps.role = 'alertdialog';\n    alertDialogProps['aria-describedby'] = modalBodyId;\n  }\n\n  useEffect(function () {\n    return function () {\n      toggleClass(document.body, \"\".concat(prefix, \"--body--with-modal-open\"), false);\n    };\n  }, [prefix]);\n  useEffect(function () {\n    toggleClass(document.body, \"\".concat(prefix, \"--body--with-modal-open\"), open);\n  }, [open, prefix]);\n  useEffect(function () {\n    var initialFocus = function initialFocus(focusContainerElement) {\n      var containerElement = focusContainerElement || innerModal.current;\n      var primaryFocusElement = containerElement ? containerElement.querySelector(selectorPrimaryFocus) : null;\n\n      if (primaryFocusElement) {\n        return primaryFocusElement;\n      }\n\n      return button && button.current;\n    };\n\n    var focusButton = function focusButton(focusContainerElement) {\n      var target = initialFocus(focusContainerElement);\n\n      if (target) {\n        target.focus();\n      }\n    };\n\n    if (open) {\n      focusButton(innerModal.current);\n    }\n  }, [open, selectorPrimaryFocus]);\n  var modalBody = /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: innerModal,\n    role: \"dialog\"\n  }, alertDialogProps, {\n    className: containerClasses,\n    \"aria-label\": ariaLabel,\n    \"aria-modal\": \"true\",\n    tabIndex: \"-1\"\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--modal-header\")\n  }, passiveModal && modalButton, modalLabel && /*#__PURE__*/React.createElement(\"h2\", {\n    id: modalLabelId,\n    className: \"\".concat(prefix, \"--modal-header__label\")\n  }, modalLabel), /*#__PURE__*/React.createElement(\"h3\", {\n    id: modalHeadingId,\n    className: \"\".concat(prefix, \"--modal-header__heading\")\n  }, modalHeading), !passiveModal && modalButton), /*#__PURE__*/React.createElement(\"div\", _extends({\n    id: modalBodyId,\n    className: contentClasses\n  }, hasScrollingContentProps, {\n    \"aria-labelledby\": getAriaLabelledBy\n  }), children), hasScrollingContent && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--modal-content--overflow-indicator\")\n  }), !passiveModal && /*#__PURE__*/React.createElement(ButtonSet, {\n    className: footerClasses\n  }, Array.isArray(secondaryButtons) && secondaryButtons.length <= 2 ? secondaryButtons.map(function (_ref3, i) {\n    var buttonText = _ref3.buttonText,\n        onButtonClick = _ref3.onClick;\n    return /*#__PURE__*/React.createElement(Button, {\n      key: \"\".concat(buttonText, \"-\").concat(i),\n      kind: \"secondary\",\n      onClick: onButtonClick\n    }, buttonText);\n  }) : secondaryButtonText && /*#__PURE__*/React.createElement(Button, {\n    kind: \"secondary\",\n    onClick: onSecondaryButtonClick,\n    ref: secondaryButton\n  }, secondaryButtonText), /*#__PURE__*/React.createElement(Button, {\n    kind: danger ? 'danger' : 'primary',\n    disabled: primaryButtonDisabled,\n    onClick: onRequestSubmit,\n    ref: button\n  }, primaryButtonText)));\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, rest, {\n    onKeyDown: handleKeyDown,\n    onMouseDown: handleMousedown,\n    onBlur: handleBlur,\n    className: modalClasses,\n    role: \"presentation\",\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    ref: startTrap,\n    tabIndex: \"0\",\n    role: \"link\",\n    className: \"\".concat(prefix, \"--visually-hidden\")\n  }, \"Focus sentinel\"), modalBody, /*#__PURE__*/React.createElement(\"span\", {\n    ref: endTrap,\n    tabIndex: \"0\",\n    role: \"link\",\n    className: \"\".concat(prefix, \"--visually-hidden\")\n  }, \"Focus sentinel\"));\n});\nModal.propTypes = (_Modal$propTypes = {\n  /**\n   * Specify whether the Modal is displaying an alert, error or warning\n   * Should go hand in hand with the danger prop.\n   */\n  alert: PropTypes.bool\n}, _defineProperty(_Modal$propTypes, 'aria-label', requiredIfGivenPropIsTruthy('hasScrollingContent', PropTypes.string)), _defineProperty(_Modal$propTypes, \"children\", PropTypes.node), _defineProperty(_Modal$propTypes, \"className\", PropTypes.string), _defineProperty(_Modal$propTypes, \"closeButtonLabel\", PropTypes.string), _defineProperty(_Modal$propTypes, \"danger\", PropTypes.bool), _defineProperty(_Modal$propTypes, \"focusTrap\", deprecate(PropTypes.bool, \"\\nThe prop `focusTrap` for Modal has been deprecated, as the feature of `focusTrap` runs by default.\")), _defineProperty(_Modal$propTypes, \"hasForm\", deprecate(PropTypes.bool, \"\\nThe prop `hasForm` for Modal has been deprecated, as the feature of `hasForm` runs by default.\")), _defineProperty(_Modal$propTypes, \"hasScrollingContent\", PropTypes.bool), _defineProperty(_Modal$propTypes, \"iconDescription\", deprecate(PropTypes.string, 'The iconDescription prop is no longer needed and can be safely removed. This prop will be removed in the next major release of Carbon.')), _defineProperty(_Modal$propTypes, \"id\", PropTypes.string), _defineProperty(_Modal$propTypes, \"modalAriaLabel\", PropTypes.string), _defineProperty(_Modal$propTypes, \"modalHeading\", PropTypes.node), _defineProperty(_Modal$propTypes, \"modalLabel\", PropTypes.node), _defineProperty(_Modal$propTypes, \"onKeyDown\", PropTypes.func), _defineProperty(_Modal$propTypes, \"onRequestClose\", PropTypes.func), _defineProperty(_Modal$propTypes, \"onRequestSubmit\", PropTypes.func), _defineProperty(_Modal$propTypes, \"onSecondarySubmit\", PropTypes.func), _defineProperty(_Modal$propTypes, \"open\", PropTypes.bool), _defineProperty(_Modal$propTypes, \"passiveModal\", PropTypes.bool), _defineProperty(_Modal$propTypes, \"preventCloseOnClickOutside\", PropTypes.bool), _defineProperty(_Modal$propTypes, \"primaryButtonDisabled\", PropTypes.bool), _defineProperty(_Modal$propTypes, \"primaryButtonText\", PropTypes.node), _defineProperty(_Modal$propTypes, \"secondaryButtonText\", PropTypes.node), _defineProperty(_Modal$propTypes, \"secondaryButtons\", function secondaryButtons(props, propName, componentName) {\n  if (props.secondaryButtons) {\n    if (!Array.isArray(props.secondaryButtons) || props.secondaryButtons.length !== 2) {\n      return new Error(\"\".concat(propName, \" needs to be an array of two button config objects\"));\n    }\n\n    var shape = {\n      buttonText: PropTypes.node,\n      onClick: PropTypes.func\n    };\n    props[propName].forEach(function (secondaryButton) {\n      PropTypes.checkPropTypes(shape, secondaryButton, propName, componentName);\n    });\n  }\n\n  return null;\n}), _defineProperty(_Modal$propTypes, \"selectorPrimaryFocus\", PropTypes.string), _defineProperty(_Modal$propTypes, \"selectorsFloatingMenus\", PropTypes.arrayOf(PropTypes.string)), _defineProperty(_Modal$propTypes, \"shouldSubmitOnEnter\", PropTypes.bool), _defineProperty(_Modal$propTypes, \"size\", PropTypes.oneOf(['xs', 'sm', 'md', 'lg'])), _Modal$propTypes);\nModal.defaultProps = {\n  onRequestClose: function onRequestClose() {},\n  onRequestSubmit: function onRequestSubmit() {},\n  primaryButtonDisabled: false,\n  onKeyDown: function onKeyDown() {},\n  passiveModal: false,\n  modalHeading: '',\n  modalLabel: '',\n  preventCloseOnClickOutside: false,\n  selectorPrimaryFocus: '[data-modal-primary-focus]',\n  hasScrollingContent: false\n};\nexport default Modal;"]},"metadata":{},"sourceType":"module"}