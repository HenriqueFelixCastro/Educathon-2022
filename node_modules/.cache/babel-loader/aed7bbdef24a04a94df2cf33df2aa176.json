{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\n/**\n * Copyright IBM Corp. 2016, 2022\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useEffect, useRef } from 'react';\nimport ddsSettings from '../../internal/vendor/@carbon/ibmdotcom-utilities/utilities/settings/settings';\nimport ipcinfoCookie from '@carbon/ibmdotcom-utilities/es/utilities/ipcinfoCookie/ipcinfoCookie';\nimport PropTypes from 'prop-types';\nimport Search from '../../internal/vendor/carbon-components-react/components/Search/Search';\nimport settings from 'carbon-components/es/globals/js/settings';\nvar stablePrefix = ddsSettings.stablePrefix;\nvar prefix = settings.prefix;\n/**\n * LocaleModalCountries component\n *\n * @param {object} props props object\n * @param {object} props.regionList object of country and language codes\n * @param {Function} props.setClearResults set flag to determine whether to reset the filtered results\n * @param {string} props.currentRegion current region\n * @returns {*} LocaleModal component\n */\n\nvar LocaleModalCountries = function LocaleModalCountries(_ref) {\n  var regionList = _ref.regionList,\n      setClearResults = _ref.setClearResults,\n      currentRegion = _ref.currentRegion,\n      modalLabels = _objectWithoutProperties(_ref, [\"regionList\", \"setClearResults\", \"currentRegion\"]);\n\n  var componentRef = useRef(null);\n  var localList = useRef(null);\n  useEffect(function () {\n    localList.current.scrollTop = 0;\n  }, [currentRegion, regionList]);\n  useEffect(function () {\n    var localeFilter = document.getElementById(\"\".concat(prefix, \"--locale-modal__filter\"));\n    var localeText = document.querySelector(\".\".concat(prefix, \"--locale-modal__search-text\"));\n    var closeBtn = document.querySelector(\".\".concat(prefix, \"--search .\").concat(prefix, \"--search-close\"));\n    var localeHidden = \"\".concat(prefix, \"--locale-modal__locales-hidden\");\n    localeFilter === null || localeFilter === void 0 ? void 0 : localeFilter.addEventListener('keyup', filterLocale.bind(null, setClearResults, localeFilter, localeHidden, localeText, modalLabels, componentRef));\n    /**\n     * Set initial focus on search input when panel loads\n     *\n     */\n\n    localeFilter === null || localeFilter === void 0 ? void 0 : localeFilter.focus();\n    /**\n     * Show all links when close button clicked\n     *\n     */\n\n    closeBtn === null || closeBtn === void 0 ? void 0 : closeBtn.addEventListener('click', setClearResults.bind(null, true));\n    return function () {\n      closeBtn === null || closeBtn === void 0 ? void 0 : closeBtn.removeEventListener('click', setClearResults.bind(null, true));\n      localeFilter === null || localeFilter === void 0 ? void 0 : localeFilter.removeEventListener('keyup', filterLocale.bind(null, setClearResults, localeFilter, localeHidden, localeText, modalLabels, componentRef));\n      localeText ? localeText.innerHTML = modalLabels.availabilityText : '';\n    };\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: componentRef,\n    className: \"\".concat(prefix, \"--locale-modal__filter\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--locale-modal__search\")\n  }, /*#__PURE__*/React.createElement(Search, {\n    \"data-autoid\": \"\".concat(stablePrefix, \"--locale-modal__filter\"),\n    placeHolderText: modalLabels.searchPlaceholder,\n    labelText: modalLabels.searchLabel,\n    closeButtonLabelText: modalLabels.searchClearText,\n    id: \"\".concat(prefix, \"--locale-modal__filter\"),\n    tabIndex: \"0\"\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"\".concat(prefix, \"--locale-modal__search-text\")\n  }, modalLabels.availabilityText)), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"\".concat(prefix, \"--locale-modal__list\"),\n    ref: localList\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"\".concat(prefix, \"--assistive-text\"),\n    role: \"status\",\n    \"aria-live\": \"assertive\"\n  }), regionList === null || regionList === void 0 ? void 0 : regionList.map(function (region) {\n    return currentRegion === region.name && region.countries.map(function (country, index) {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        key: index\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        className: \"\".concat(prefix, \"--locale-modal__locales\"),\n        onClick: function onClick() {\n          return _setCookie(country.locale);\n        },\n        href: country.href,\n        \"data-region\": country.region\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefix, \"--locale-modal__locales__name\")\n      }, country.name), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefix, \"--locale-modal__locales__name\")\n      }, country.language)));\n    });\n  })));\n};\n/**\n * @property {object} propTypes LocaleModalCountries propTypes\n * @description Defined property types for component\n * @type {{regionList: Array, availabilityText: string, unavailabilityText: string, placeHolderText: string, labelText: string}}\n */\n\n\nLocaleModalCountries.propTypes = {\n  /**\n   * Array of regions, countries, and languages.\n   */\n  regionList: PropTypes.array,\n\n  /**\n   * Func to clear search input.\n   */\n  setClearResults: PropTypes.func,\n\n  /**\n   * String of current region.\n   */\n  currentRegion: PropTypes.string\n};\nLocaleModalCountries.defaultProps = {\n  searchLabel: 'Search by location or language'\n};\n/**\n * method to handle when country/region has been selected\n * sets the ipcInfo cookie with selected locale\n *\n * @param {object} locale selected country/region\n * @private\n */\n\nexport var _setCookie = function _setCookie(locale) {\n  var localeSplit = locale.split('-');\n  var localeObj = {\n    cc: localeSplit[1],\n    lc: localeSplit[0]\n  };\n  ipcinfoCookie.set(localeObj);\n};\n/**\n * Filter locale links based on search input\n *\n */\n\nexport var filterLocale = function filterLocale(setClearResults, localeFilter, localeHidden, localeText, modalLabels, componentRef) {\n  var localeItems = document.querySelectorAll(\".\".concat(prefix, \"--locale-modal__list a:not(.\").concat(prefix, \"--locale-modal__locales-filtered)\"));\n  setClearResults(false);\n  var filterVal = localeFilter.value.toUpperCase();\n\n  _toConsumableArray(localeItems).map(function (item) {\n    var locale = item.getElementsByTagName('div');\n    var country = locale[0].textContent || locale[0].innerText;\n    var language = locale[1].textContent || locale[1].innerText;\n\n    if (country.toUpperCase().indexOf(filterVal) > -1 || language.toUpperCase().indexOf(filterVal) > -1) {\n      item.classList.remove(localeHidden);\n    } else {\n      item.classList.add(localeHidden);\n    }\n  });\n  /**\n   * Update locale copy when no results\n   *\n   */\n\n\n  var localeItemsHidden = document.querySelectorAll(\".\".concat(localeHidden));\n  localeText.innerHTML = localeItems.length === localeItemsHidden.length ? modalLabels.unavailabilityText : modalLabels.availabilityText;\n  /**\n   *  Reflect number of results in the accessibility readout\n   */\n\n  if (componentRef) {\n    var resultsElement = componentRef.current.querySelector(\".\".concat(prefix, \"--locale-modal__list .\").concat(prefix, \"--assistive-text\"));\n    var resultsCount = localeItems.length - localeItemsHidden.length;\n\n    if (resultsElement) {\n      resultsElement.textContent = \"\".concat(resultsCount, \" \").concat(resultsCount == 1 ? 'result' : 'results', \" found.\");\n    }\n  }\n};\nexport default LocaleModalCountries;","map":{"version":3,"sources":["/Users/henriquefelixcastro/Downloads/Educathon 2022/educathon-2022-website/node_modules/@carbon/ibmdotcom-react/es/components/LocaleModal/LocaleModalCountries.js"],"names":["_toConsumableArray","_objectWithoutProperties","React","useEffect","useRef","ddsSettings","ipcinfoCookie","PropTypes","Search","settings","stablePrefix","prefix","LocaleModalCountries","_ref","regionList","setClearResults","currentRegion","modalLabels","componentRef","localList","current","scrollTop","localeFilter","document","getElementById","concat","localeText","querySelector","closeBtn","localeHidden","addEventListener","filterLocale","bind","focus","removeEventListener","innerHTML","availabilityText","createElement","ref","className","placeHolderText","searchPlaceholder","labelText","searchLabel","closeButtonLabelText","searchClearText","id","tabIndex","role","map","region","name","countries","country","index","key","onClick","_setCookie","locale","href","language","propTypes","array","func","string","defaultProps","localeSplit","split","localeObj","cc","lc","set","localeItems","querySelectorAll","filterVal","value","toUpperCase","item","getElementsByTagName","textContent","innerText","indexOf","classList","remove","add","localeItemsHidden","length","unavailabilityText","resultsElement","resultsCount"],"mappings":"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","sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\n\n/**\n * Copyright IBM Corp. 2016, 2022\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React, { useEffect, useRef } from 'react';\nimport ddsSettings from '../../internal/vendor/@carbon/ibmdotcom-utilities/utilities/settings/settings';\nimport ipcinfoCookie from '@carbon/ibmdotcom-utilities/es/utilities/ipcinfoCookie/ipcinfoCookie';\nimport PropTypes from 'prop-types';\nimport Search from '../../internal/vendor/carbon-components-react/components/Search/Search';\nimport settings from 'carbon-components/es/globals/js/settings';\nvar stablePrefix = ddsSettings.stablePrefix;\nvar prefix = settings.prefix;\n/**\n * LocaleModalCountries component\n *\n * @param {object} props props object\n * @param {object} props.regionList object of country and language codes\n * @param {Function} props.setClearResults set flag to determine whether to reset the filtered results\n * @param {string} props.currentRegion current region\n * @returns {*} LocaleModal component\n */\n\nvar LocaleModalCountries = function LocaleModalCountries(_ref) {\n  var regionList = _ref.regionList,\n      setClearResults = _ref.setClearResults,\n      currentRegion = _ref.currentRegion,\n      modalLabels = _objectWithoutProperties(_ref, [\"regionList\", \"setClearResults\", \"currentRegion\"]);\n\n  var componentRef = useRef(null);\n  var localList = useRef(null);\n  useEffect(function () {\n    localList.current.scrollTop = 0;\n  }, [currentRegion, regionList]);\n  useEffect(function () {\n    var localeFilter = document.getElementById(\"\".concat(prefix, \"--locale-modal__filter\"));\n    var localeText = document.querySelector(\".\".concat(prefix, \"--locale-modal__search-text\"));\n    var closeBtn = document.querySelector(\".\".concat(prefix, \"--search .\").concat(prefix, \"--search-close\"));\n    var localeHidden = \"\".concat(prefix, \"--locale-modal__locales-hidden\");\n    localeFilter === null || localeFilter === void 0 ? void 0 : localeFilter.addEventListener('keyup', filterLocale.bind(null, setClearResults, localeFilter, localeHidden, localeText, modalLabels, componentRef));\n    /**\n     * Set initial focus on search input when panel loads\n     *\n     */\n\n    localeFilter === null || localeFilter === void 0 ? void 0 : localeFilter.focus();\n    /**\n     * Show all links when close button clicked\n     *\n     */\n\n    closeBtn === null || closeBtn === void 0 ? void 0 : closeBtn.addEventListener('click', setClearResults.bind(null, true));\n    return function () {\n      closeBtn === null || closeBtn === void 0 ? void 0 : closeBtn.removeEventListener('click', setClearResults.bind(null, true));\n      localeFilter === null || localeFilter === void 0 ? void 0 : localeFilter.removeEventListener('keyup', filterLocale.bind(null, setClearResults, localeFilter, localeHidden, localeText, modalLabels, componentRef));\n      localeText ? localeText.innerHTML = modalLabels.availabilityText : '';\n    };\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: componentRef,\n    className: \"\".concat(prefix, \"--locale-modal__filter\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--locale-modal__search\")\n  }, /*#__PURE__*/React.createElement(Search, {\n    \"data-autoid\": \"\".concat(stablePrefix, \"--locale-modal__filter\"),\n    placeHolderText: modalLabels.searchPlaceholder,\n    labelText: modalLabels.searchLabel,\n    closeButtonLabelText: modalLabels.searchClearText,\n    id: \"\".concat(prefix, \"--locale-modal__filter\"),\n    tabIndex: \"0\"\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"\".concat(prefix, \"--locale-modal__search-text\")\n  }, modalLabels.availabilityText)), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"\".concat(prefix, \"--locale-modal__list\"),\n    ref: localList\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"\".concat(prefix, \"--assistive-text\"),\n    role: \"status\",\n    \"aria-live\": \"assertive\"\n  }), regionList === null || regionList === void 0 ? void 0 : regionList.map(function (region) {\n    return currentRegion === region.name && region.countries.map(function (country, index) {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        key: index\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        className: \"\".concat(prefix, \"--locale-modal__locales\"),\n        onClick: function onClick() {\n          return _setCookie(country.locale);\n        },\n        href: country.href,\n        \"data-region\": country.region\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefix, \"--locale-modal__locales__name\")\n      }, country.name), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefix, \"--locale-modal__locales__name\")\n      }, country.language)));\n    });\n  })));\n};\n/**\n * @property {object} propTypes LocaleModalCountries propTypes\n * @description Defined property types for component\n * @type {{regionList: Array, availabilityText: string, unavailabilityText: string, placeHolderText: string, labelText: string}}\n */\n\n\nLocaleModalCountries.propTypes = {\n  /**\n   * Array of regions, countries, and languages.\n   */\n  regionList: PropTypes.array,\n\n  /**\n   * Func to clear search input.\n   */\n  setClearResults: PropTypes.func,\n\n  /**\n   * String of current region.\n   */\n  currentRegion: PropTypes.string\n};\nLocaleModalCountries.defaultProps = {\n  searchLabel: 'Search by location or language'\n};\n/**\n * method to handle when country/region has been selected\n * sets the ipcInfo cookie with selected locale\n *\n * @param {object} locale selected country/region\n * @private\n */\n\nexport var _setCookie = function _setCookie(locale) {\n  var localeSplit = locale.split('-');\n  var localeObj = {\n    cc: localeSplit[1],\n    lc: localeSplit[0]\n  };\n  ipcinfoCookie.set(localeObj);\n};\n/**\n * Filter locale links based on search input\n *\n */\n\nexport var filterLocale = function filterLocale(setClearResults, localeFilter, localeHidden, localeText, modalLabels, componentRef) {\n  var localeItems = document.querySelectorAll(\".\".concat(prefix, \"--locale-modal__list a:not(.\").concat(prefix, \"--locale-modal__locales-filtered)\"));\n  setClearResults(false);\n  var filterVal = localeFilter.value.toUpperCase();\n\n  _toConsumableArray(localeItems).map(function (item) {\n    var locale = item.getElementsByTagName('div');\n    var country = locale[0].textContent || locale[0].innerText;\n    var language = locale[1].textContent || locale[1].innerText;\n\n    if (country.toUpperCase().indexOf(filterVal) > -1 || language.toUpperCase().indexOf(filterVal) > -1) {\n      item.classList.remove(localeHidden);\n    } else {\n      item.classList.add(localeHidden);\n    }\n  });\n  /**\n   * Update locale copy when no results\n   *\n   */\n\n\n  var localeItemsHidden = document.querySelectorAll(\".\".concat(localeHidden));\n  localeText.innerHTML = localeItems.length === localeItemsHidden.length ? modalLabels.unavailabilityText : modalLabels.availabilityText;\n  /**\n   *  Reflect number of results in the accessibility readout\n   */\n\n  if (componentRef) {\n    var resultsElement = componentRef.current.querySelector(\".\".concat(prefix, \"--locale-modal__list .\").concat(prefix, \"--assistive-text\"));\n    var resultsCount = localeItems.length - localeItemsHidden.length;\n\n    if (resultsElement) {\n      resultsElement.textContent = \"\".concat(resultsCount, \" \").concat(resultsCount == 1 ? 'result' : 'results', \" found.\");\n    }\n  }\n};\nexport default LocaleModalCountries;"]},"metadata":{},"sourceType":"module"}